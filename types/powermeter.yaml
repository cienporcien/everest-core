description: Powermeter types
types:
  TransactionReq:
    description: Required input parameter for starting an OCMF transaction. These values will be included in the signed OCMF packet.
    type: object
    additionalProperties: false
    required:
      - evse_id
      - transaction_id
      - client_id
      - tariff_id
      - cable_id
      - user_data
    properties:
      evse_id:
        description: Id of this EVSE
        type: string
      transaction_id:
        description: OCPP transaction UUID
        type: string
      client_id:
        description: User identification means, e.g. RFID card ID
        type: string
      tariff_id:
        description: Tariff ID
        type: integer
      cable_id:
        description: Cable ID
        type: integer
      user_data:
        description: User data
        type: string
      transaction_assigned_to_user:
        description: Has the user already been identified or does that happen later?
        type: boolean
        default: false
      user_identification_type:
        description: Set the identification method used in a transaction
        type: string
        $ref: /powermeter#/UserIdType
        default: None
      user_identification_name:
        description: Name assigned to the user in the transaction information
        type: string
        default: "None"
  UserIdType:
    description: >-
      Configuration data for powermeter certified transaction
        None          - no user identification available at this moment
        Denied        - not retrievable (e.g. two-factor-auth)
        Undefined     - type unknown / other
        Iso14443      - UID of RFID card according to ISO14443 (4 or 7 bytes HEX)
        Iso15693      - UID of RFID card according to ISO15693 (8 bytes HEX)
        Emaid         - Electro-Mobility-Account-ID according to ISO/IEC15118 (14 or 15 bytes string)
        Evccid        - ID of an EV according to ISO/IEC15118 (max 6 bytes)
        Evcoid        - EV-Contract-ID according to DIN91286
        Iso7812       - Identification-Card-Format according to ISO/IEC7812 (credit-/banking-cards, etc.)
        Card_Tx_Nbr   - Card-Transaction-Number (CardTxNbr) for credit- or banking-cards
        Central       - centrally generated ID (no fixed format, e.g. UUID); OCPP 2.0
        Central_1     - centrally generated ID (no fixed format, e.g. start-via-SMS); (up to) OCPP 1.6
        Central_2     - centrally generated ID (no fixed format, e.g. start-by-operator); (up to) OCPP 1.6
        Local         - locally generated ID (no fixed format, e.g. UUID); OCPP 2.0
        Local_1       - locally generated ID (no fixed format, e.g. generated by chargepoint); (up to) OCPP 1.6
        Local_2       - locally generated ID (no fixed format, other); (up to) OCPP 1.6
        Phone_Number  - international phone number (leading '+' with country code)
        Key_Code      - private user key (no fixed format)
    type: string
    enum:
      - None
      - Denied
      - Undefined
      - Iso14443
      - Iso15693
      - Emaid
      - Evccid
      - Evcoid
      - Iso7812
      - Card_Tx_Nbr
      - Central
      - Central_1
      - Central_2
      - Local
      - Local_1
      - Local_2
      - Phone_Number
      - Key_Code
  TransactionRequestStatus:
    description: Status of a transaction start or stop request.
    type: string
    enum:
        - OK
        - NOT_SUPPORTED
        - UNEXPECTED_ERROR
  TransactionStartResponse:
    description: Return value when a transaction is started.
    type: object
    additionalProperties: false
    required:
      - status
    properties:
      status:
        description: Response status that indicates whether the transaction start request could successfully be performed.
        $ref: /powermeter#/TransactionRequestStatus
      error:
        description: If status is not OK, a verbose error message.
        type: string
      transaction_min_stop_time:
        description: Earliest point in time the started transaction can be stopped again (if a minimum duration is required by the meter); yields a RFC3339 timestamp.
        type: string
        format: date-time
      transaction_max_stop_time:
        description:  Deadline for the transaction to be stopped again (if a minimum duration is required by the meter); yields a RFC3339 timestamp.
        type: string
        format: date-time
  TransactionStopResponse:
    description: Report returned when a OCMF transaction is requested to stop. If successful, includes the signed OCMF string. In case of an error, an additional error message can be provided.
    type: object
    additionalProperties: false
    required:
      - status
    properties:
      status:
        description: Response status that indicates whether the transaction stop request could successfully be performed.
        $ref: /powermeter#/TransactionRequestStatus
      ocmf:
        description: The signed OCMF report of the stopped transaction. Must be provided if status is OK.
        type: string
      error:
        description: If status is not OK, a verbose error message.
        type: string
  Powermeter:
    description: Measured dataset (AC or DC)
    type: object
    additionalProperties: false
    required:
      - timestamp
      - energy_Wh_import
    properties:
      timestamp:
        description: Timestamp of measurement
        type: string
        format: date-time
      meter_id:
        description: A (user defined) meter if (e.g. id printed on the case)
        type: string
      phase_seq_error:
        description: "AC only: true for 3 phase rotation error (ccw)"
        type: boolean
      energy_Wh_import:
        description: Imported energy in Wh (from grid)
        type: object
        $ref: /units#/Energy
      energy_Wh_export:
        description: Exported energy in Wh (to grid)
        type: object
        $ref: /units#/Energy
      power_W:
        description:
          Instantaneous power in Watt. Negative values are exported, positive
          values imported Energy.
        type: object
        $ref: /units#/Power
      voltage_V:
        description: Voltage in Volts
        type: object
        $ref: /units#/Voltage
      VAR:
        description: Reactive power VAR
        type: object
        $ref: /units#/ReactivePower
      current_A:
        description: Current in ampere
        type: object
        $ref: /units#/Current
      frequency_Hz:
        description: Grid frequency in Hertz
        type: object
        $ref: /units#/Frequency
  TransactionParameters:
    description: Configuration data for powermeter certified transaction
    type: object
    required:
      - transaction_assigned_to_user
    properties:
      transaction_assigned_to_user:
        description: Timestamp of measurement
        type: boolean
        default: false
      user_identification_type:
        description: Set the identification method used in a transaction
        type: string
        $ref: /powermeter#/UserIdType
        default: None
      user_identification_name:
        description: Name assigned to the user in the transaction information
        type: string
        default: "None"
  UserIdType:
    description: >-
      Configuration data for powermeter certified transaction
        None          - no user identification available at this moment
        Denied        - not retrievable (e.g. two-factor-auth)
        Undefined     - type unknown / other
        Iso14443      - UID of RFID card according to ISO14443 (4 or 7 bytes HEX)
        Iso15693      - UID of RFID card according to ISO15693 (8 bytes HEX)
        Emaid         - Electro-Mobility-Account-ID according to ISO/IEC15118 (14 or 15 bytes string)
        Evccid        - ID of an EV according to ISO/IEC15118 (max 6 bytes)
        Evcoid        - EV-Contract-ID according to DIN91286
        Iso7812       - Identification-Card-Format according to ISO/IEC7812 (credit-/banking-cards, etc.)
        Card_Tx_Nbr   - Card-Transaction-Number (CardTxNbr) for credit- or banking-cards
        Central       - centrally generated ID (no fixed format, e.g. UUID); OCPP 2.0
        Central_1     - centrally generated ID (no fixed format, e.g. start-via-SMS); (up to) OCPP 1.6
        Central_2     - centrally generated ID (no fixed format, e.g. start-by-operator); (up to) OCPP 1.6
        Local         - locally generated ID (no fixed format, e.g. UUID); OCPP 2.0
        Local_1       - locally generated ID (no fixed format, e.g. generated by chargepoint); (up to) OCPP 1.6
        Local_2       - locally generated ID (no fixed format, other); (up to) OCPP 1.6
        Phone_Number  - international phone number (leading '+' with country code)
        Key_Code      - private user key (no fixed format)
    type: string
    enum:
      - None
      - Denied
      - Undefined
      - Iso14443
      - Iso15693
      - Emaid
      - Evccid
      - Evcoid
      - Iso7812
      - Card_Tx_Nbr
      - Central
      - Central_1
      - Central_2
      - Local
      - Local_1
      - Local_2
      - Phone_Number
      - Key_Code